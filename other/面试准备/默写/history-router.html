<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>history-router</title>
  </head>
  <body>
    <ul>
      <li><a href="/home">首页</a></li>
      <li><a href="/detail">详情</a></li>
      <li><a href="/about">关于</a></li>
    </ul>
    <div id="router-view"></div>

    <script>
      const routerView = document.getElementById("router-view");

      function changeView() {
        switch (location.pathname) {
          case "/home":
            routerView.innerHTML = "首页";
            break;
          case "/detail":
            routerView.innerHTML = "详情";
            break;
          case "/about":
            routerView.innerHTML = "关于";
            break;
          default:
            routerView.innerHTML = "第一次进入";
            break;
        }
      }
      // 监听用户点击 前进后退
      window.addEventListener("popstate", changeView);

      const anchorList = document.querySelectorAll("a[href]");
      anchorList.forEach(anchor => {
        anchor.addEventListener("click", event => {
          event.preventDefault();
          history.pushState(null, "", anchor.getAttribute("href"));
          changeView();
        });
      });

      // 第一次进入自己调用
      changeView();
    </script>
  </body>
</html>
